tinymce.PluginManager.add("stopwords", function (t, e) { $.get("/umbraco/surface/PartialSurface/GetStopwords", function (e) { t.on("focusout", function (n) { for (var o = t.getContent(), r = o, a = e, c = 0; c < a.length; c++) { var f = a[c], s = '<span style="color:#fff;background:red;">' + f + "</span>", i = (r.indexOf(f), r.lastIndexOf(f)); if (!r.substr(0, i - 2).endsWith("red;")) { var d = new RegExp(f, "g"); r = r.replace(d, s) } } r != o && tinymce.activeEditor.setContent(r) }) }) });