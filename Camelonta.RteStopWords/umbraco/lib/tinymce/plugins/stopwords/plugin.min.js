tinymce.PluginManager.add("stopwords", function (t, n) { var r = ["planet", "mars"], e = function (t, n) { for (var r = []; -1 !== n.indexOf(t);) { var e = n.lastIndexOf(t); r.push(e), n = n.substr(0, e) } return r }; t.on("focusout", function (n) { for (var s = t.getContent(), a = 0; a < r.length; a++)for (var o = r[a], u = '<span style="background:red;">' + o + "</span>", i = e(o, s), d = 0; d < i.length; d++) { var f = i[d]; if (!s.substr(0, f - 2).endsWith("red;")) { var c = o.length; s = s.substr(0, f) + u + s.substr(f + c) } } tinymce.activeEditor.setContent(s) }) });